<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>behavior-tree | Duck Ridge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <meta name="keywords" content="" />
  
  
  
  
  <meta name="description" content="Behavior Tree Learning DiaryLearn BeehaviorTree in Godot?This article is about tech sharing and it also the standard writing template for my new series: the forging of Random Monster（暂）. tip Random Mo">
<meta property="og:type" content="website">
<meta property="og:title" content="Behavior-Tree">
<meta property="og:url" content="http://duck-ridge.github.io/2023/Behavior-Tree.html">
<meta property="og:site_name" content="Duck Ridge">
<meta property="og:description" content="Behavior Tree Learning DiaryLearn BeehaviorTree in Godot?This article is about tech sharing and it also the standard writing template for my new series: the forging of Random Monster（暂）. tip Random Mo">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-02-19T19:22:29.000Z">
<meta property="article:modified_time" content="2025-01-18T22:48:35.670Z">
<meta property="article:author" content="Todd Huang">
<meta property="article:tag" content="Godot">
<meta property="article:tag" content="Random Monster">
<meta property="article:tag" content="Addon">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Duck Ridge" type="application/atom+xml">
  

  

  <link rel="icon" href="/css/images/mylogo.gif">
  <link rel="apple-touch-icon" href="/css/images/mylogo.gif">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt; src:url("/css/fonts/FuturaPTBold.otf") format("woff");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt-light; src:url("/css/fonts/FuturaPTBook.otf") format("woff");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt-italic; src:url("/css/fonts/FuturaPTBookOblique.otf") format("woff");font-weight:400;font-style:italic;}
}

  </style>
  
<link rel="stylesheet" href="/css/style.css">


  
<script src="/js/jquery-3.1.1.min.js"></script>

  
<script src="/js/bootstrap.js"></script>


  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    
<link rel="stylesheet" href="/css/dialog.css">

  

  

  
    <link rel="stylesheet" href="/css/header-post.css" >
  

  
    <link rel="stylesheet" href="/css/archive.css" >
  
  
  

<meta name="generator" content="Hexo 6.3.0"></head>



  <body>


  
  <div id="container">
    <div id="wrap">
      
        <header>

    <div id="allheader" class="navbar navbar-default navbar-static-top" role="navigation">
        <div class="navbar-inner">
          
          <div class="container"> 
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            
              <a class="brand" style="
                 margin-top: 0px;"  
                 >
                  <img width="124px" height="124px" alt="Hike News" src="/css/images/mylogo.gif">
              </a>
            
            
            <div class="navbar-collapse collapse">
              <ul class="hnav navbar-nav">
                
                  <li> <a class="main-nav-link" href="/">Home</a> </li>
                
                  <li> <a class="main-nav-link" href="/archives">Archives</a> </li>
                
                  <li> <a class="main-nav-link" href="/about">About</a> </li>
                
                  <li><div id="search-form-wrap">

    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="index.search"><button type="submit" class="search-form-submit"> </button><input type="hidden" name="sitesearch" value="http://duck-ridge.github.io"></form>

</div></li>
            </div>
          </div>
                
      </div>
    </div>

</header>



      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="page-"  class="article article-type-page" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      Behavior-Tree
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2023/Behavior-Tree.html" class="article-date">
	  <time datetime="2023-02-19T19:22:29.000Z" itemprop="datePublished">2023-02-19</time>
	</a>

      
      
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Behavior-Tree-Learning-Diary"><a href="#Behavior-Tree-Learning-Diary" class="headerlink" title="Behavior Tree Learning Diary"></a>Behavior Tree Learning Diary</h1><h2 id="Learn-BeehaviorTree-in-Godot"><a href="#Learn-BeehaviorTree-in-Godot" class="headerlink" title="Learn BeehaviorTree in Godot?"></a>Learn BeehaviorTree in Godot?</h2><p>This article is about tech sharing and it also the standard writing template for my new series: the forging of Random Monster（暂）.</p>
<p><strong>tip Random Monster（暂）</strong><br>Random Monster（暂） is the game that I am developing.<br>Multiple new techniques that I learned lately will be employed here:</p>
<ul>
<li>Behavior Tree</li>
<li>Random number generation and combination</li>
<li>Pathway finding and 2D navigation</li>
<li>Inventory system etc.<br>Special thanks to bitbrain and the beehavior tutorial that he created makes me learn behavior tree in Godot nice and easy.</li>
</ul>
<h3 id="Nodes"><a href="#Nodes" class="headerlink" title="Nodes"></a>Nodes</h3><p><strong>tip Leaf Node</strong><br>Behavior Tree composed by many different nodes, the program will take different action underlying various conditions.</p>
<ul>
<li>Action nodes<ul>
<li>Execute action</li>
</ul>
</li>
<li>Condition nodes<ul>
<li>Constantly checking <strong>action node</strong> and return the status: success, failure, running</li>
</ul>
</li>
</ul>
<p><strong>tip Branch Node</strong><br>Branch Node is morphologically upstream in the cascade of behavior tree and that is the reason why it called Branch Node.<br>Composite nodes receive status signals return from <strong>Condition nodes</strong> according to the outcome of <strong>Action nodes</strong>. Composite nodes should make decision what to do next.</p>
<p><strong>Composite nodes</strong></p>
<ul>
<li>Sequence nodes<ul>
<li>Try to run all child nodes</li>
<li>Return “SUCCESS” when all Child Node report “SUCCESS”</li>
<li>Break and return “FAIL” when at least one Child Node return “FAIL”</li>
</ul>
</li>
<li>Selector nodes<ul>
<li>Try to run all child nodes</li>
<li>Return “SUCCESS” when at least one Child Node report “SUCCESS”</li>
<li>Break and return “FAIL” when all Child Node return “FAIL”</li>
</ul>
</li>
<li>Sequence*&#x2F;Selector</li>
</ul>
<hr>
<p><strong>tip Decorator nodes</strong><br>Failers<br>Always fail!<br>Succeeders<br>Always succeed!<br>Limiters &gt; The limiter will execute its child x amount of times. When the number of maximum ticks is reached, it will return a FAILURE status code.<br>Inverters<br>Invert the result of child condition nodes. Turn success to failure one, vice versa.</p>
<hr>
<p><strong>important Tips for Behavior Tree</strong><br>DO NOT hard-code:<br>Hard-code is directly use constants in programming instead using export variables to manipulate the values.<br>Split the task:<br>Disassemble one complex tasks to  a series of small tasks which makes the Sequence Nodes easy to be broken down.<br>Use Inverter wisely<br>Sequence Nodes not gonna break down until one child node failed; Thus, the behavior tree always stuck on the last node.(1&#x2F;2)<br>Using a inverter parent node to alter the result condition node can break the sequence node when condition node achieved.</p>
<p>Question</p>
<blockquote>
<p>What is the different between SequenceStarComposite and SequenceComposite nodes?<br>The Sequence Star node is similar to the Sequence, however, it will skip all previous child nodes that succeeded prior, in case one of the children is currently in RUNNING state.<br>A usecase for this is if you want to ensure that only one action is executed at a time, regardless of for long it runs.</p>
</blockquote>
<p>Same situation for Selector and Star Selector</p>
<blockquote>
<p>The Selector Star node is similar to the Selector, however, it will skip all previous child nodes that were executed prior, in case one of the children is currently in RUNNING state. A usecase for this is if you want to ensure that only one action is executed at a time, regardless of for long it runs.</p>
</blockquote>
<hr>
<h2 id="BeehaviorTree-Example-Goblin-Villagers"><a href="#BeehaviorTree-Example-Goblin-Villagers" class="headerlink" title="BeehaviorTree Example - Goblin Villagers"></a>BeehaviorTree Example - Goblin Villagers</h2><p>Special thanks to bitbrain and the beehavior tutorial that he created makes me learn behavior tree in Godot nice and easy.<br>The example of behavior tree will be dissembled and demonstrated here:<br>In the goblin village there are 3 types of goblin villagers and they perform different tasks. They are <strong>Lumberjack</strong>,  <strong>Trader</strong>, <strong>Forester</strong>. All of goblins are inherited from “Villager” type (extends kinematicBody2D). “Villager” type including various animation, villager name and profession, speed etc.<br>The differences of their profession are defined by their behavior trees (extends BeehaveRoot)</p>
<p><strong>tip profession of goblins</strong></p>
<ul>
<li>Lumberjack<ul>
<li>Lumberjacks are responsible for chop trees, and loading the wooden material into boxes. When no tasks to do lumberjacks will go to dormitory and have a rest.</li>
</ul>
</li>
<li>Forester<ul>
<li>After lumberjacks chop tree, a tree stump will be left on the place. Then foresters should come to the stump and remove it and plant a new tree.</li>
</ul>
</li>
<li>Trader<ul>
<li>The traders should collect the filled wood box and transport it to the ferry. The traders will take a rest if there is no room for box on ferry or no filled box.<br>When villagers have a rest, meanwhile, player can spot out the smoke burst from chimney of house which means the long house is occupied by resting individual.</li>
</ul>
</li>
</ul>
<p>Then will should dissemble their duty. The first one should be lumberjack.</p>
<blockquote>
<p>Important: try to split a complex behavior into several simple actions.</p>
</blockquote>
<p>The explanation of Lumberjack will start with SequenceStar Node: Chop Wood.<br>SequenceStar means the actions will be executed one by one.</p>
<hr>


<p><strong>tip Lumberjack</strong></p>
<ul>
<li>Selector: Either, Execute “Wait” or “Chop Wood”</li>
<li>Sequence: Wait<ul>
<li>Selector: Need to wait</li>
<li>Selector: Rest</li>
</ul>
</li>
<li>SequencerStar: Chop Wood<ul>
<li>Action: Leave house</li>
<li>Action: Walk to tree</li>
<li>Action: Chop</li>
<li>Action: Walk to stash</li>
<li>Action: Place box</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
      
      
      

    </footer>
  </div>
  
    
  
</article>

<!-- Table of Contents -->

</section>
        
      </div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2019 - 2025 Duck Ridge All Rights Reserved.</p>
	      
	      
  		   	<p id="copyRightCn">Todd Huang hold copyright</p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/scripts.js"></script>


















  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Duck Ridge
          </div>
          <div class="panel-body">
            Copyright © 2025 Todd Huang All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  
</body>
</html>